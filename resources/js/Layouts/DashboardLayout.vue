<script setup>
import { Link } from '@inertiajs/vue3';

</script>

<template>
    <div @click="toggleSideBar()" id="overlay" class="hidden fixed inset-0 bg-black bg-opacity-50 z-20"></div>
    <section class="flex bg-slate-100">
        <!-- Sidebar -->
        <div id="sidebar" class="flex flex-col fixed z-50 -translate-x-full h-screen w-52 md:z-0 md:flex-shrink-0 md:flex-none md:top-0 md:sticky md:translate-x-0 md:w-64 px-6 border-r-2 border-r-amber-100 shadow-sm overflow-auto bg-white text-indigo-50 text-md hover-anim">
            <div class="flex items-center space-x-7 md:h-32 font-bold md:text-xl text-gray-800 pt-7 pb-6">
                <span><i class="fa-solid fa-chart-pie"></i></span>
                <h1>DASHBOARD</h1>
            </div>
            <ul class="font-semibold md:text-lg text-gray-800 space-y-6 border-y-2 border-y-amber-100 py-8">
                <li class="cursor-pointer hover-anim hover:text-gray-800">
                    <Link :href="route('home')" class="sidebar-item flex justify-between items-center">
                        <i class="sidebar-icon w-1/3 fa-solid fa-boxes-stacked"></i>
                        <span class="w-full">Produk</span>
                    </Link>
                </li>
                <li class="cursor-pointer hover-anim hover:text-gray-800">
                    <Link :href="route('home')" class="sidebar-item flex justify-between items-center">
                        <i class="sidebar-icon w-1/3 fa-solid fa-user"></i>
                        <span class="w-full">User</span>
                    </Link>
                </li>
                <li class="cursor-pointer hover-anim hover:text-gray-800">
                    <Link :href="route('home')" class="sidebar-item flex justify-between items-center">
                        <i class="sidebar-icon w-1/3 fa-solid fa-cart-flatbed"></i>
                        <span class="w-full">Order</span>
                    </Link>
                </li>
            </ul>
            <a class="mt-auto mb-6 font-semibold text-gray-800 flex justify-between items-center">
                <i class="sidebar-icon w-1/3 fa-solid fa-house"></i>
                <span class="w-full">Back</span>
            </a>
        </div>

        <div class="flex-grow">
            <!-- Header -->
            <header class="flex flex-row justify-between w-full sticky md:h-32 top-0 z-10 shadow-sm bg-white py-4 px-2 space-x-2 border-b-2 border-b-amber-100">
                <div id="hamburger-button-container" class="flex justify-evenly items-center w-2/12 hover-anim md:hidden">
                    <button id="hamburger-button" class="" @click="toggleSideBar()">
                        <i class="xs:block hidden fa-solid fa-bars"></i>
                        <i id="hidden-hamburger-button" class="xs:hidden fa-solid fa-bars hover-anim"></i>
                    </button>
                </div>
                <Link :href="route('home')" class="max-w-full self-center h-auto object-contain md:w-36 w-20 ">
                    <!-- LOGO UDAH DI CUSTOM -->
                    <svg class="fill-amber-300" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="100%" viewBox="0 0 1203 275" enable-background="new 0 0 1203 275" xml:space="preserve">
                        <path opacity="1.000000" stroke="none" d=" M1204.000000,272.666687   C1176.348755,273.000000 1148.697632,273.000000 1120.147095,273.000000   C1120.147095,270.811523 1120.147095,268.907776 1120.147095,267.004059   C1120.147095,229.178360 1120.157104,191.352661 1120.129639,153.526978   C1120.127197,150.202957 1120.287598,146.801849 1119.675293,143.568558   C1117.027832,129.588089 1105.347046,123.378784 1090.354248,127.626816   C1076.686401,131.499481 1071.239380,142.145676 1068.105591,154.589294   C1067.264526,157.928757 1067.009155,161.487503 1066.986694,164.948837   C1066.889526,179.944992 1067.225586,194.947067 1066.940308,209.938171   C1066.525024,231.756516 1071.979004,251.368027 1087.177612,267.651825   C1088.412964,268.975494 1089.409180,270.522614 1090.958740,272.542236   C1062.521362,272.542236 1034.709351,272.542236 1006.124023,272.542236   C1006.124023,270.681580 1006.125854,268.754059 1006.123779,266.826538   C1006.083130,228.667603 1006.043762,190.508682 1005.995422,152.349747   C1005.993103,150.518402 1006.014038,148.677704 1005.848633,146.857315   C1004.170898,128.398666 991.167908,124.303841 976.859863,127.454849   C967.205627,129.580963 960.732666,136.029297 957.084290,144.919876   C954.971924,150.067657 952.840088,155.738647 952.893494,161.152695   C953.134521,185.574997 953.579102,210.025955 955.121826,234.392426   C955.953735,247.530869 964.930969,257.366302 972.810364,267.287903   C974.044556,268.842010 975.268799,270.403961 976.956787,272.544556   C940.381226,272.544556 904.455627,272.544556 867.858887,272.544556   C870.749207,268.645844 873.237244,264.984283 876.032349,261.574341   C886.006714,249.405899 891.109619,235.518677 891.097900,219.779266   C891.075195,189.309219 891.264771,158.836334 890.895508,128.370331   C890.713806,113.377602 884.669067,100.324570 875.239868,88.778687   C872.837952,85.837654 870.626831,82.740829 867.880554,79.126663   C895.370056,79.126663 922.193542,79.126663 949.546143,79.126663   C949.546143,87.790085 949.546143,96.525726 949.546143,105.698570   C954.920654,99.981659 959.448364,94.335823 964.807190,89.638023   C975.968628,79.853279 989.332825,75.015190 1004.128967,75.128601   C1012.721375,75.194450 1021.540955,75.501030 1029.840332,77.465347   C1045.448364,81.159462 1056.635376,88.767151 1063.307617,107.100609   C1067.658936,101.944466 1071.660889,96.131531 1076.699707,91.429718   C1092.738647,76.463226 1112.407227,73.129547 1133.342041,75.544800   C1140.013428,76.314468 1146.785645,77.998337 1153.010376,80.507492   C1170.254761,87.458595 1179.001465,101.448601 1179.760620,119.267159   C1180.979126,147.867035 1181.294434,176.544067 1180.786499,205.167130   C1180.345215,230.038345 1185.796387,252.273575 1203.757446,270.773895   C1204.000000,271.444458 1204.000000,271.888885 1204.000000,272.666687  z"/>
                        <path opacity="1.000000" stroke="none" d=" M723.468628,276.000000   C718.843567,275.020813 714.683350,274.057343 710.531311,273.060028   C671.142822,263.599213 647.498657,237.960327 640.917847,197.742020   C637.450073,176.548935 638.124695,155.655579 645.550110,135.335419   C656.449829,105.507462 678.098755,87.205849 708.313232,79.231049   C734.239197,72.388168 760.395996,72.826202 785.978699,81.231079   C812.775208,90.034744 831.550476,107.741745 840.268616,134.775070   C850.305664,165.897964 850.145264,196.990067 835.980347,226.994690   C823.374695,253.696411 800.979797,267.881958 772.801025,273.945435   C770.052063,274.536926 767.254517,274.902740 764.239746,275.686646   C750.645752,276.000000 737.291565,276.000000 723.468628,276.000000  M783.926819,155.777786   C778.788086,136.165359 764.244446,122.142418 739.735840,123.959671   C725.122192,125.043259 713.446899,131.271255 706.650574,144.528366   C696.628662,164.077469 696.866577,184.455536 705.324951,204.198486   C712.747314,221.523285 727.543945,228.838211 746.012573,227.889206   C762.956360,227.018555 775.272705,218.492477 781.615723,202.622147   C787.589722,187.675079 787.477051,172.163086 783.926819,155.777786  z"/>
                        <path opacity="1.000000" stroke="none" d=" M259.468658,276.000000   C252.356491,274.256348 245.583618,272.895966 239.091171,270.704712   C205.669464,259.424652 185.862473,235.938828 179.270859,201.632416   C174.886169,178.812103 175.288803,155.984360 183.796326,133.884521   C195.377930,103.799156 217.790024,85.918282 248.497055,78.615807   C274.673767,72.390694 300.993561,72.888481 326.556915,82.269882   C357.957397,93.793434 375.674255,117.088120 381.860687,149.323822   C386.406219,173.009216 385.889160,196.595856 377.016449,219.462708   C365.066559,250.260162 341.771454,267.194183 310.203003,273.943817   C307.613434,274.497467 304.981079,274.851135 302.184326,275.648865   C287.979095,276.000000 273.958221,276.000000 259.468658,276.000000  M307.180206,132.296799   C291.128601,118.355652 255.418243,120.175179 243.457764,146.003571   C234.594757,165.143036 234.645004,184.711517 242.890167,203.913284   C250.076340,220.648773 265.198517,228.934219 284.415588,227.984314   C301.146942,227.157288 314.758209,216.428482 320.409943,199.556732   C325.019043,185.797470 325.098755,171.829666 322.007385,157.790543   C319.851776,148.001083 315.731201,139.249527 307.180206,132.296799  z"/>
                        <path opacity="1.000000" stroke="none" d=" M162.669006,204.113647   C161.218033,214.918228 159.503494,225.848038 157.632446,236.750977   C156.178558,245.223083 154.712662,253.702606 152.839813,262.086731   C152.364883,264.212860 150.731766,267.013702 148.920761,267.744232   C141.612152,270.692474 134.025848,272.952332 126.271042,275.733215   C114.312439,276.000000 102.624878,276.000000 90.234001,275.705566   C77.548302,273.160522 66.586372,268.668152 57.732849,260.066345   C44.354099,247.067932 38.718948,230.491425 38.170277,212.451157   C37.396599,187.012451 37.767490,161.538925 37.651096,136.080276   C37.642277,134.151138 37.649940,132.221939 37.649940,130.000000   C24.938894,130.000000 12.969447,130.000000 1.000000,130.000000   C1.000000,130.000000 1.000000,129.500000 0.999999,129.250000   C11.414896,117.578896 21.909002,106.228821 32.228027,94.721741   C53.020374,71.535500 73.723846,48.269520 94.431114,25.007179   C95.288651,24.043839 95.813751,22.784584 96.493729,21.663195   C96.979179,21.965672 97.464638,22.268150 97.950089,22.570627   C97.950089,41.091923 97.950089,59.613220 97.950089,78.716309   C114.887886,78.716309 131.294312,78.716309 148.387634,78.716309   C143.086670,96.218544 138.008102,112.986458 132.864777,129.968170   C121.320892,129.968170 110.022972,129.968170 98.247406,129.968170   C98.154594,131.842133 98.008049,133.437424 98.006828,135.032837   C97.991676,154.858902 97.917633,174.685608 98.068550,194.510544   C98.097298,198.286743 98.657021,202.156479 99.624161,205.810379   C103.102303,218.950821 111.729660,226.189316 126.050713,227.819183   C139.725830,229.375519 150.477844,224.322693 157.836975,212.558350   C159.507523,209.887802 160.846466,207.009811 162.669006,204.113647  z"/>
                        <path opacity="1.000000" stroke="none" d=" M484.531372,1.000000   C485.080322,3.160182 485.229706,5.320329 485.230865,7.480554   C485.259430,61.950527 485.137238,116.421082 485.366577,170.890152   C485.440094,188.357742 486.118683,205.839310 487.102844,223.281616   C487.987091,238.953354 493.568359,253.017593 503.711578,265.156342   C505.581451,267.394073 507.293396,269.763702 509.533508,272.661377   C472.885498,272.661377 437.086700,272.661377 400.273834,272.661377   C402.128113,270.222870 403.362274,268.319580 404.868195,266.663361   C418.467163,251.707138 423.627197,233.572556 423.918274,213.961823   C424.499115,174.831406 424.921967,135.692642 424.763428,96.559952   C424.692810,79.128235 423.326569,61.683025 422.046356,44.280872   C421.020569,30.336470 414.297760,18.729887 405.542694,8.162333   C403.859924,6.131215 402.457489,3.867868 400.962860,1.355831   C428.687561,1.000000 456.375122,1.000000 484.531372,1.000000  z"/>
                        <path opacity="1.000000" stroke="none" d=" M539.747192,263.271240   C522.563721,235.146790 505.628876,207.298477 488.507507,179.565338   C486.671173,176.590942 486.633636,174.488968 488.489471,171.599258   C498.010986,156.773422 507.461609,141.898712 516.673523,126.879471   C519.347168,122.520348 521.310364,117.695236 523.316162,112.963737   C526.468506,105.527473 525.175964,98.635406 520.041443,92.491066   C516.448425,88.191467 512.712585,84.011215 508.486603,79.138947   C551.359497,79.138947 593.437256,79.138947 636.802673,79.138947   C632.116821,82.894180 628.417419,86.131050 624.448608,88.994560   C601.476196,105.569244 584.913696,127.842094 569.204712,150.882843   C564.519470,157.754776 559.945679,164.702896 555.236694,171.558334   C553.414185,174.211517 553.257874,176.686844 555.154846,179.346222   C568.867310,198.569427 581.478455,218.714722 596.619263,236.735764   C607.188904,249.316147 621.210449,258.996765 633.695190,269.966858   C634.426392,270.609314 635.203369,271.199768 636.597961,272.334167   C634.864563,272.629669 633.854614,272.951294 632.844360,272.952301   C605.021301,272.979797 577.197937,273.031982 549.376099,272.845490   C547.529907,272.833099 545.337524,271.310181 543.948486,269.870209   C542.257080,268.116882 541.246704,265.706757 539.747192,263.271240  z"/>
                        <path opacity="1.000000" stroke="none" d=" M163.246429,203.973648   C163.096039,203.565018 163.191971,203.130020 163.287888,202.695038   C163.396149,202.709671 163.504425,202.724304 163.612686,202.738937   C163.572693,203.141724 163.532700,203.544510 163.246429,203.973648  z"/>
                    </svg>
                </Link>
                <div class="flex flex-col px-2 self-center">
                    <nav class="flex md:justify-between justify-end w-full md:space-x-10">
                        <div class="flex flex-row">
                            <div id="UserDropdown" class="dropdown dropdown-hover dropdown-bottom dropdown-end flex cursor-pointer p-1 rounded-md md:hover:bg-amber-200 hover-anim">
                                <Link :href="route('logout')" method="post" as="button" class="flex p-2">
                                    <button class="flex text-gray-800 md:text-2xl md:mr-2 mr-0 md:p-0 px-1 hover:bg-amber-200 rounded-lg hover-anim">
                                        <i class="self-center fa-regular fa-user xs:align-top hover:text-indigo-800"></i>
                                    </button>
                                    <div class="object-contain md:flex md:flex-col md:justify-center hidden">
                                        <p class="text-xs">Welcome back,</p>
                                        <p class="font-semibold"> {{ $page.props.auth.user.name }}</p>
                                    </div>
                                </Link>
            
                                <!-- Dropdown Item -->
                                <ul tabindex="0" class="dropdown-content menu bg-base-100 rounded-box z-[1] w-44 p-2 shadow">
                                    <li><Link :href="route('home')">Home</Link></li>
                                    <li><Link :href="route('product')">Product</Link></li>
                                    <li><Link :href="route('about')">About</Link></li>
                                    <li><Link :href="route('logout')" method="post" as="button" class="text-red-500">Logout</Link></li>
                                </ul>
                                </div>
                        </div>
                    </nav>
                </div>
            </header>

            <!-- Content -->
            <main class="flex-grow p-3">
                <slot />
            </main>
        </div>
    </section>
</template>

<script>
let isMinimized = true;
function toggleSideBar() {
    const sidebar = document.getElementById("sidebar");
    const overlay = document.getElementById('overlay');
    // const sidebar_off_canvas = document.getElementById(
    //   "sidebar-off-canvas"
    // ) as HTMLElement;
    const hamburger_button_container = document.getElementById("hamburger-button-container");
    const hidden_hamburger_button = document.getElementById("hidden-hamburger-button");
    const descendant = sidebar.querySelectorAll("i, span, #sidebar-name");
    const sidebar_item = sidebar.querySelectorAll(".sidebar-item");
    // if (window.innerWidth >= 768) {
    //     if (!isMinimized) {
    //         sidebar.classList.remove("w-2/12");
    //         sidebar.classList.add("w-20");
    //         hamburger_button_container.classList.remove("w-2/12");
    //         hamburger_button_container.classList.add("w-20");
    //         // if (window.innerWidth < 768) {
    //         //     sidebar.classList;
    //         // }
    //         // Array.from(descendant).forEach((e) => {
    //         //     if (!e.classList.contains("sidebar-icon")) {
    //         //         e.classList.add("hidden");
    //         //     }
    //         // });
    //         Array.from(sidebar_item).forEach((e) => {
    //             e.classList.remove("justify-between");
    //             e.classList.add("justify-center");
    //         });
    //     }
    //     else {
    //         sidebar.classList.remove("w-20");
    //         sidebar.classList.add("w-2/12");
    //         hamburger_button_container.classList.remove("w-20");
    //         hamburger_button_container.classList.add("w-2/12");
    //         // Array.from(descendant).forEach((e) => {
    //         //     if (!e.classList.contains("sidebar-icon")) {
    //         //         e.classList.remove("hidden");
    //         //     }
    //         // });
    //         Array.from(sidebar_item).forEach((e) => {
    //             e.classList.remove("justify-center");
    //             e.classList.add("justify-between");
    //         });
    //     }
    // }
    // else {
        if (isMinimized) {
            sidebar.classList.remove("-translate-x-full");
            sidebar.classList.add("translate-x-0");
            hidden_hamburger_button.classList.add("rotate-90");
            hidden_hamburger_button.classList.remove("fa-bars");
            hidden_hamburger_button.classList.add("fa-x");
            overlay.classList.remove("hidden");
        }
        else {
            sidebar.classList.add("-translate-x-full");
            sidebar.classList.remove("translate-x-0");
            hidden_hamburger_button.classList.remove("rotate-90");
            hidden_hamburger_button.classList.remove("fa-x");
            hidden_hamburger_button.classList.add("fa-bars");
            overlay.classList.add("hidden");
        }
    // }
    isMinimized = !isMinimized;
}

window.addEventListener('resize', () => {
    if (window.innerWidth >= 760) { // Check if the width has reached 768
        if (isMinimized === false) {
            toggleSideBar();
            // console.log('click');
        }
    } 
});


</script>